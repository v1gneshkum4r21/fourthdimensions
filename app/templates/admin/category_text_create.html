{% extends 'admin/model/create.html' %}

{% block body %}
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title"><i class="fas fa-file-alt"></i> Create New Category Text</h3>
    </div>
    <div class="panel-body">
        <form action="" method="POST" class="admin-form">
            {% if form.hidden_tag is defined %}
                {{ form.hidden_tag() }}
            {% else %}
                {% if csrf_token %}
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                {% endif %}
            {% endif %}
            
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category if category != 'error' else 'danger' }}">
                            <button type="button" class="close" data-dismiss="alert">&times;</button>
                            <i class="fas fa-{{ 'info-circle' if category == 'info' else ('check-circle' if category == 'success' else 'exclamation-triangle') }}"></i> {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            <div class="row">
                <div class="col-md-6">
                    <!-- Title Field -->
                    <div class="form-group">
                        <label for="{{ form.title.id }}">
                            <i class="fas fa-heading"></i> 
                            {{ form.title.label.text }}
                            {% if form.title.flags.required %}<span class="required">*</span>{% endif %}
                        </label>
                        {{ form.title(class="form-control") }}
                        {% if form.title.errors %}
                            <ul class="errors list-unstyled">
                                {% for error in form.title.errors %}
                                    <li class="text-danger"><i class="fas fa-exclamation-circle"></i> {{ error }}</li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                    
                    <!-- Category Field -->
                    <div class="form-group">
                        <label for="{{ form.category.id }}">
                            <i class="fas fa-tags"></i> 
                            {{ form.category.label.text }}
                            {% if form.category.flags.required %}<span class="required">*</span>{% endif %}
                        </label>
                        {{ form.category(class="form-control select2") }}
                        {% if form.category.errors %}
                            <ul class="errors list-unstyled">
                                {% for error in form.category.errors %}
                                    <li class="text-danger"><i class="fas fa-exclamation-circle"></i> {{ error }}</li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                </div>
                
                <div class="col-md-6">
                    <!-- Content Field -->
                    <div class="form-group">
                        <label for="{{ form.content.id }}">
                            <i class="fas fa-align-left"></i> 
                            {{ form.content.label.text }}
                            {% if form.content.flags.required %}<span class="required">*</span>{% endif %}
                        </label>
                        {{ form.content(class="form-control", rows=10) }}
                        {% if form.content.errors %}
                            <ul class="errors list-unstyled">
                                {% for error in form.content.errors %}
                                    <li class="text-danger"><i class="fas fa-exclamation-circle"></i> {{ error }}</li>
                                {% endfor %}
                            </ul>
                        {% endif %}
                    </div>
                </div>
            </div>
            
            <hr>
            
            <div class="form-group">
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-save"></i> Save
                </button>
                <a href="{{ return_url }}" class="btn btn-default">
                    <i class="fas fa-times"></i> Cancel
                </a>
            </div>
        </form>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize Select2 for category dropdown
    if ($.fn.select2) {
        $('.select2').select2({
            width: '100%',
            placeholder: 'Select a category',
            allowClear: true
        });
    }
});
</script>
{% endblock %} 